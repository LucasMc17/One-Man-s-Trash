[gd_scene load_steps=30 format=3 uid="uid://b2m4463t40ea1"]

[ext_resource type="Script" uid="uid://krn38ubei1hi" path="res://levels/level_01/root.gd" id="1_06tnj"]
[ext_resource type="PackedScene" uid="uid://bquo2sra7l7e6" path="res://envs/daytime_env.tscn" id="1_jsf6y"]
[ext_resource type="PackedScene" uid="uid://dp1q3ngso06dk" path="res://scenes/characters/player/player.tscn" id="2_34nx1"]
[ext_resource type="PackedScene" uid="uid://brwpkrrtos4o5" path="res://debug/debug_block.tscn" id="3_qgp6h"]
[ext_resource type="PackedScene" uid="uid://bo47ph4exyenq" path="res://scenes/chairs/debug_chair_01.tscn" id="4_06tnj"]
[ext_resource type="PackedScene" uid="uid://cd024r0w1hp4p" path="res://invisible_walls/invisible_wall.tscn" id="5_metud"]
[ext_resource type="PackedScene" uid="uid://8t3idewsxgn6" path="res://scenes/doors/debug_door_01.tscn" id="6_510th"]
[ext_resource type="PackedScene" uid="uid://bctvs0pbevh86" path="res://scenes/characters/npcs/bartender/bartender.tscn" id="6_v74tu"]
[ext_resource type="Script" uid="uid://cau1wg8ulku16" path="res://states/state_machine.gd" id="7_e1ace"]
[ext_resource type="PackedScene" uid="uid://oi5poak31x26" path="res://scenes/characters/npcs/bart/bart.tscn" id="7_thd0o"]
[ext_resource type="Script" uid="uid://cl72tt8fe8l65" path="res://levels/states/level_state.gd" id="8_34nx1"]
[ext_resource type="Script" uid="uid://dvwhpd62w54hn" path="res://levels/states/level_texting_state.gd" id="10_06tnj"]
[ext_resource type="Resource" uid="uid://dv8ce25mon2xc" path="res://assets/resources/contacts/amanda_contact.tres" id="11_v74tu"]
[ext_resource type="Resource" uid="uid://dq4emaufqar8g" path="res://assets/resources/text_messages/amanda_texts_01.tres" id="12_e1ace"]
[ext_resource type="Script" uid="uid://d0jnhn152jsa0" path="res://levels/level_01/states/wait_for_amanda_text_state.gd" id="13_dv2dd"]
[ext_resource type="Resource" uid="uid://ddfh7v57htm4s" path="res://assets/resources/contacts/bart_contact.tres" id="13_xjxtq"]
[ext_resource type="Script" uid="uid://6ijnyw0ae7iu" path="res://levels/level_01/states/bart_chat_state.gd" id="14_dv2dd"]
[ext_resource type="Resource" uid="uid://b28n4idy1lf3m" path="res://assets/resources/text_messages/bart_texts_01.tres" id="14_x43fk"]
[ext_resource type="PackedScene" uid="uid://c7jcuvst7cih2" path="res://scenes/props/inert_props/beer_bottle.tscn" id="15_thd0o"]
[ext_resource type="Script" uid="uid://daxt11k50236q" path="res://levels/states/level_wait_state.gd" id="15_x43fk"]
[ext_resource type="PackedScene" uid="uid://dps1at258aprq" path="res://area_triggers/area_trigger_oneoff.tscn" id="21_2q5mi"]
[ext_resource type="PackedScene" uid="uid://cjdsdi4crt385" path="res://area_triggers/area_trigger.tscn" id="22_2q5mi"]
[ext_resource type="PackedScene" uid="uid://ox4r47a7ajrg" path="res://area_triggers/area_counter.tscn" id="23_2q5mi"]

[sub_resource type="BoxShape3D" id="BoxShape3D_bt03r"]
size = Vector3(1, 1.96729, 1)

[sub_resource type="Curve3D" id="Curve3D_dv2dd"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0, 0, 0, 0, 0, 3, 0, 9, 0, 0, 0, 0, 0, 0, 3, 0, 15),
"tilts": PackedFloat32Array(0, 0, 0)
}
point_count = 3

[sub_resource type="Curve3D" id="Curve3D_510th"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 3.137, 0, -4),
"tilts": PackedFloat32Array(0)
}
point_count = 1

[sub_resource type="Curve3D" id="Curve3D_3qwjj"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 3.137, 0, 2.25),
"tilts": PackedFloat32Array(0)
}
point_count = 1

[sub_resource type="BoxShape3D" id="BoxShape3D_xxjo0"]
size = Vector3(2.41992, 1.68164, 1)

[sub_resource type="SphereShape3D" id="SphereShape3D_2q5mi"]

[node name="Node3D" type="Node3D"]
script = ExtResource("1_06tnj")

[node name="DaytimeEnv" parent="." instance=ExtResource("1_jsf6y")]

[node name="Player" parent="." instance=ExtResource("2_34nx1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0856678, 0, -1.38034)

[node name="Geometry" type="Node3D" parent="."]

[node name="Visible" type="Node3D" parent="Geometry"]

[node name="RightWall" parent="Geometry/Visible" instance=ExtResource("3_qgp6h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 3.5, 0)
size = Vector3(0.5, 7, 40)

[node name="LeftWall" parent="Geometry/Visible" instance=ExtResource("3_qgp6h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, 3.5, 0)
size = Vector3(0.5, 7, 40)

[node name="Floor" parent="Geometry/Visible" instance=ExtResource("3_qgp6h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.25, 0)
size = Vector3(7.5, 0.5, 40)

[node name="Ceiling" parent="Geometry/Visible" instance=ExtResource("3_qgp6h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 7, 0)
size = Vector3(7.5, 0.5, 40)

[node name="BackWall" parent="Geometry/Visible" instance=ExtResource("3_qgp6h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.5, 20.3)
size = Vector3(8, 7, 0.5)

[node name="Counter" parent="Geometry/Visible" instance=ExtResource("3_qgp6h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 0.5, 0)
size = Vector3(1, 1, 10)

[node name="BathroomWall" parent="Geometry/Visible" instance=ExtResource("3_qgp6h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.22085, 1.01758, 12.9966)
size = Vector3(1.5, 2, 0.2)

[node name="BathroomWall2" parent="Geometry/Visible" instance=ExtResource("3_qgp6h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.703888, 1.01758, 12.9966)
size = Vector3(1.5, 2, 0.2)

[node name="Invisible" type="Node3D" parent="Geometry"]

[node name="BathroomInvisP" parent="Geometry/Invisible" instance=ExtResource("5_metud")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.96389, 0.533929, 13.3911)
PLAYER_ONLY = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="Geometry/Invisible/BathroomInvisP"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.483643, 0)
shape = SubResource("BoxShape3D_bt03r")

[node name="Seats" type="Node3D" parent="."]

[node name="PlayerChair" parent="Seats" groups=["LevelImportant"] instance=ExtResource("4_06tnj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.744456, 0, 0)

[node name="DebugChair04" parent="Seats" instance=ExtResource("4_06tnj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.744456, 0, -1.46479)

[node name="DebugChair05" parent="Seats" instance=ExtResource("4_06tnj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.744456, 0, -2.77926)

[node name="DebugChair06" parent="Seats" instance=ExtResource("4_06tnj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.744456, 0, -4.36483)

[node name="BartChair" parent="Seats" groups=["LevelImportant"] instance=ExtResource("4_06tnj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.744456, 0, 1.46014)

[node name="DebugChair03" parent="Seats" instance=ExtResource("4_06tnj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.744456, 0, 2.97665)

[node name="Doors" type="Node3D" parent="."]

[node name="BathroomDoor" parent="Doors" groups=["LevelImportant"] instance=ExtResource("6_510th")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.96809, 0, 12.9894)
is_locked = true
is_open = true

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("CURRENT_STATE")]
unique_name_in_owner = true
script = ExtResource("7_e1ace")
CURRENT_STATE = NodePath("DebugState")
metadata/_custom_type_script = "uid://cau1wg8ulku16"

[node name="DebugState" type="Node" parent="StateMachine"]
script = ExtResource("8_34nx1")
metadata/_custom_type_script = "uid://cl72tt8fe8l65"

[node name="TextAmandaState" type="Node" parent="StateMachine" node_paths=PackedStringArray("NEXT_STATE")]
script = ExtResource("10_06tnj")
CONTACT = ExtResource("11_v74tu")
NEW_EXCHANGE = ExtResource("12_e1ace")
NEXT_STATE = NodePath("../WaitForBartText")
metadata/_custom_type_script = "uid://dvwhpd62w54hn"

[node name="TextBartState" type="Node" parent="StateMachine" node_paths=PackedStringArray("NEXT_STATE")]
script = ExtResource("10_06tnj")
CONTACT = ExtResource("13_xjxtq")
NEW_EXCHANGE = ExtResource("14_x43fk")
NEXT_STATE = NodePath("../DebugState")
metadata/_custom_type_script = "uid://dvwhpd62w54hn"

[node name="WaitForAmandaText" type="Node" parent="StateMachine" node_paths=PackedStringArray("TIMER", "NEXT_STATE")]
script = ExtResource("13_dv2dd")
TIMER = NodePath("../../LevelTimer")
NEXT_STATE = NodePath("../TextAmandaState")
metadata/_custom_type_script = "uid://daxt11k50236q"

[node name="BartChat" type="Node" parent="StateMachine"]
script = ExtResource("14_dv2dd")

[node name="WaitForBartText" type="Node" parent="StateMachine" node_paths=PackedStringArray("TIMER", "NEXT_STATE")]
script = ExtResource("15_x43fk")
TIMER = NodePath("../../LevelTimer")
NEXT_STATE = NodePath("../TextBartState")
metadata/_custom_type_script = "uid://daxt11k50236q"

[node name="LevelTimer" type="Timer" parent="."]

[node name="Props" type="Node3D" parent="."]

[node name="InertProps" type="Node3D" parent="Props"]

[node name="BeerBottle" parent="Props/InertProps" instance=ExtResource("15_thd0o")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.86657, 1.04585, 0)

[node name="BeerBottle2" parent="Props/InertProps" instance=ExtResource("15_thd0o")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.78854, 1.04585, 0.128315)

[node name="BeerBottle3" parent="Props/InertProps" instance=ExtResource("15_thd0o")]
transform = Transform3D(-3.63786e-08, -0.832245, -0.554409, 1, -4.37114e-08, 0, -2.4234e-08, -0.554409, 0.832245, 2.07561, 1.02977, -1.59145)

[node name="PhysicsProps" type="Node3D" parent="Props"]

[node name="NPCs" type="Node" parent="."]

[node name="Bartender" parent="NPCs" node_paths=PackedStringArray("MOVE_PATHS") instance=ExtResource("6_v74tu")]
transform = Transform3D(1, -6.1206e-15, -2.98023e-07, -5.32907e-14, 1, -4.9738e-14, 2.98023e-07, -6.80743e-15, 1, 3.137, 1.19209e-07, 2.25)
MOVE_PATHS = [NodePath("../../Paths/Bartender/PointA"), NodePath("../../Paths/Bartender/PointB")]

[node name="Bart" parent="NPCs" node_paths=PackedStringArray("MOVE_PATHS") instance=ExtResource("7_thd0o")]
MOVE_PATHS = [NodePath("../../Paths/Bart/ToBathroom")]

[node name="Paths" type="Node" parent="."]

[node name="Bart" type="Node" parent="Paths"]

[node name="ToBathroom" type="Path3D" parent="Paths/Bart"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.11433, 0.109519, 0)
curve = SubResource("Curve3D_dv2dd")

[node name="Bartender" type="Node" parent="Paths"]

[node name="PointA" type="Path3D" parent="Paths/Bartender"]
curve = SubResource("Curve3D_510th")

[node name="PointB" type="Path3D" parent="Paths/Bartender"]
curve = SubResource("Curve3D_3qwjj")

[node name="Triggers" type="Node" parent="."]
unique_name_in_owner = true

[node name="BartBathroomOneoff" parent="Triggers" node_paths=PackedStringArray("INCLUDED") instance=ExtResource("21_2q5mi")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.978, 0.67, 15.295)
INCLUDED = [NodePath("../../NPCs/Bart")]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Triggers/BartBathroomOneoff"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.34082, 0)
shape = SubResource("BoxShape3D_xxjo0")

[node name="AreaTrigger" parent="." node_paths=PackedStringArray("INCLUDED") instance=ExtResource("22_2q5mi")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.619475, 0, 11.5909)
INCLUDED = [NodePath("../Player")]

[node name="AreaCounter" parent="." node_paths=PackedStringArray("INCLUDED") instance=ExtResource("23_2q5mi")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.15372, 6.17273)
LIMIT = 1
INCLUDED = [NodePath("../Player")]

[node name="CollisionShape3D" type="CollisionShape3D" parent="AreaCounter"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1.23245)
shape = SubResource("SphereShape3D_2q5mi")

[connection signal="entered" from="Triggers/BartBathroomOneoff" to="." method="_on_bart_bathroom_oneoff_entered"]
